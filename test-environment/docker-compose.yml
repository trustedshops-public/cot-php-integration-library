services:
  test-environment:
    build:
      context: ..
      dockerfile: test-environment/Dockerfile
    container_name: cot-test-environment
    ports:
      - "8081:8081"
      - "9003:9003"  # Xdebug port
    volumes:
      # Mount source code for live sync (direct from original directories)
      - ../src:/var/www/html/src:ro
      - ../vendor:/var/www/html/vendor:ro
      # Mount test environment for development
      - .:/var/www/html/test-environment
    environment:
      - PHP_ENV=development
      - XDEBUG_MODE=debug
    restart: unless-stopped
    networks:
      - cot-test-network

networks:
  cot-test-network:
    driver: bridge
